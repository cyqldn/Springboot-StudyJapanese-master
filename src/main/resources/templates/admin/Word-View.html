<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Let's study Jpanese !</title>
    <meta name="description" content="Ela Admin - HTML5 Admin Template">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="apple-touch-icon" href="https://i.imgur.com/QRAUqs9.png">
    <link rel="shortcut icon" href="https://i.imgur.com/QRAUqs9.png">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.0/normalize.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lykmapipo/themify-icons@0.1.2/css/themify-icons.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pixeden-stroke-7-icon@1.2.3/pe-icon-7-stroke/dist/pe-icon-7-stroke.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.0/css/flag-icon.min.css">
    <link rel="stylesheet" th:href="@{/static/css/cs-skin-elastic.css}">
    <link rel="stylesheet" th:href="@{/static/css/style.css}">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css" rel="stylesheet" />

    <style>
        .content {
            float: left;
            padding: 1.875em;
            width: 100%;
        }



       div.search {padding: 15px 0;}

        form {
            position: relative;
            width: 300px;
            margin: 0 auto;
        }

        .bar1 {background: #A3D0C3;}
        .bar1 input {
            border: 2px solid #7BA7AB;
            border-radius: 5px;
            background: #F9F0DA;
            color: #9E9C9C;
            height: 40px;
            width: 250px;
        }
        .bar1 button {
            top: 0;
            right: 0;
            background: #7BA7AB;
            border-radius: 0 5px 5px 0;
            padding-top: 3px;
            padding-bottom: 7px;
            padding-right: 7px;
        }
        .bar1 button:before {
            content: "\f002";
            font-family: FontAwesome;
            font-size: 25px;
            color: #F9F0DA;
        }


    </style>

</head>

<body>






<!-- Left Panel -->
<div th:replace="common/admin-leftbar::leftbar"/>



<div id="right-panel" class="right-panel">

    <!-- Header-->
    <!-- Header-->
    <!-- Header-->
    <header id="header" class="header">
        <div class="top-left">
            <div class="navbar-header">
                <a class="navbar-brand" th:href="@{/admin/main}"><img th:src="@{/static/images/logo.png}" alt="Logo"></a>
                <a class="navbar-brand hidden" href=""><img th:src="@{/static/images/logo2.png}" alt="Logo"></a>
                <a id="menuToggle" class="menutoggle"><i class="fa fa-bars"></i></a>
            </div>
        </div>


        <!-- 导航栏-->
        <div class="top-right">
            <div class="header-menu">
                <div class="header-left">
                    <div class="dropdown for-notification">
                        管理员您好！
                        <button class="btn btn-secondary dropdown-toggle" type="button" id="notification" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="fa fa-user-secret"></i>
                        </button>

                        <div class="dropdown-menu" aria-labelledby="notification">
                            <p class="red">控制中心</p>
                           <!-- <a class="dropdown-item media" th:href="@{/templates/admin/main.html}">
                                <i class="f fa fa-user"></i>
                                <p>普通用户</p>
                            </a>-->
                            <a class="dropdown-item media" th:href="@{/logout}">
                                <i class="fa fa-power-off"></i>
                                <p>退出登录</p>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header >

    <div class="breadcrumbs">
        <div class="breadcrumbs-inner">
            <div class="row m-0">
                <div class="col-sm-4">
                    <div class="page-header float-left">
                        <div class="page-title">
                            <h1>当前位置</h1>
                        </div>
                    </div>
                </div>
                <div class="col-sm-8">
                    <div class="page-header float-right">
                        <div class="page-title">
                            <ol class="breadcrumb text-right">
                                <li><a href="#">主页</a></li>
                                <li><a href="#">后台管理</a></li>
                                <li class="active">单词管理</li>
                            </ol>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="content">
        <div class="row">
            <div class="col-lg-12">
                <div class="card">
                    <div class="card-header">
                        <strong class="card-title">单词栏</strong>
                        <div class="search bar1">
                        <form th:action="@{/admin/viewWord}">
                            <input type="text" name="wordName"  th:value="${wordName}" placeholder="请输入您要查询的单词...">
                            <button type="submit"></button>
                        </form>
                        </div>
                        <h2 class="float-left"><a class="btn btn-outline-success" th:href="@{/admin/toAddWord}" >添加单词</a></h2>
                       <!-- <form class="form-horizontal" id="form_table"  enctype="multipart/form-data" method="post">

                        </form>-->
                        <input style="margin-top: 3px;margin-left: 3px"  type="button" id="upload" class="btn btn-outline-success" value="批量导入"/><br>
                        <input id="file1" class="form-input" type="file" />

                    </div>

                    <div class="card-body">
                        <table class="table table-layout:fixed" >
                            <thead>
                            <tr>
                                <th scope="col">序号</th>
                                <th scope="col">单词</th>
                                <th scope="col">读音</th>
                                <th  style="width: 300px">解释</th>
                                <th scope="col">等级</th>
                                <th scope="col">操作</th>
                            </tr>
                            </thead>
                            <tbody>
                            <style type="text/css">.table {table-layout:fixed}</style>
                            <tr th:each="word:${word}">
                                <td th:text="${word.getWordId()}">序号</td>
                                <td th:text="${word.getWordName()}">单词</td>
                                <td  th:text="${word.getAudio()}">读音</td>
                                <td style="overflow:hidden;white-space:nowrap;text-overflow:ellipsis;" th:text="${word.getExplanation()}" >解释</td>
                                <td><b> <div th:switch="${word.getGrade()}">
                                    <b th:case="1">N1</b>
                                    <b th:case="2">N2</b>
                                    <b th:case="3">N3</b>
                                    <b th:case="4">N4</b>
                                </div></b></td>
                                <td>
                                    <a class="btn btn-sm btn-primary" th:href="@{/admin/toUpdateWord/}+${word.getWordId()}">编辑</a>
                                    <a class="btn btn-sm btn-danger" th:href="@{/admin/deleteWord/}+${word.getWordId()}" onclick="deleteword()">删除</a>
                                </td>
                            </tr>

                            </tbody>
                        </table>
                        <div >
                            <p th:text="${msg}" style="color: red;font-size: 20px;text-align: center "></p>
                        </div>


                        <div style="float:right;">
                            <p style="color: #000000;font-size: 18px;">当前 第 <span th:text="${pageInfo.pageNum}"></span> 页,总 <span th:text="${pageInfo.pages}"></span> 页,共 <span th:text="${pageInfo.total}"></span> 条记录</p>

                            <button> <a th:href="@{/admin/viewWord}">首页</a></button>
                            <button> <a th:href="@{/admin/viewWord(pageNum=${pageInfo.hasPreviousPage}?${pageInfo.prePage}:1)}">上一页</a></button>
                            <button> <a th:href="@{/admin/viewWord(pageNum=${pageInfo.hasNextPage}?${pageInfo.nextPage}:${pageInfo.pages})}">下一页</a></button>
                            <button> <a th:href="@{/admin/viewWord(pageNum=${pageInfo.pages})}">尾页</a></button>
                        </div>

                    </div>
                </div>
            </div>
        </div>

    </div><!-- .content -->

    <div class="clearfix"></div>

    <div th:replace="common/footer::footer"/>

</div><!-- /#right-panel -->


<script src="https://cdn.jsdelivr.net/npm/jquery@2.2.4/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.4/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery-match-height@0.7.2/dist/jquery.matchHeight.min.js"></script>
<script th:src="@{/static/js/main.js}"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.2/dist/jquery.min.js"></script>
<script src="http://i.gtimg.cn/qzone/biz/gdt/lib/jquery/jquery-2.1.4.js?max_age=31536000"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
<script th:inline="javascript">
   /* $(document).ready(function(){
        console.log("111");
        // 初始化内容
    });*/
  /* $("#result").click(()=>{
       toastr.options={
           timeout:10000
       }
     var x=$("#resulttest").val();
       if(x==0){
           toastr.success("文件上传成功！", "成功");//成功



       } else  {
           toastr.error("文件上传失败！", "失败");//错误


       }

   });*/
   $(function () {
       $("#upload").click (function () {


           var formData = new FormData();//获取表单中的文件
           formData.append("myfile",document.getElementById("file1").files[0]);
           $.ajax({
               url:"/admin/import",//后台的接口地址
               type:"post",//post请求方式
               data:formData,//参数
               cache: false,
               processData: false,
               contentType: false,

               success:function (data) {

                       toastr.success("文件上传成功！", "成功");//成功
                   console.log("111");


               },error:function () {

                   toastr.error("文件上传失败！", "失败");//错误
                   console.log("2221");
               }
           })

   });
   });
</script>
<script>
    function deleteword() {
        if (confirm("您确定要删除吗？")) {
            return true;
        } else {
            return false;
        }
    }
</script>
</body>
</html>